<div class="row justify-content-center mt-5">
  <div class="col-md-6 col-lg-5">
    <div class="card shadow-sm border-0">
      
      <!-- Header -->
      <div class="card-header text-white text-center" style="background: linear-gradient(to right, rgb(118, 150, 86), rgb(139, 69, 19));">
        <h4 class="mb-0">
          Modifier l'utilisateur
        </h4>
      </div>

      <!-- Body -->
      <div class="card-body p-4">
        <%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put }) do |f| %>
          <%= render "devise/shared/error_messages", resource: resource %>

          <!-- Email -->
          <div class="mb-3">
            <%= f.label :email, class: "form-label fw-semibold" %>
            <%= f.email_field :email,
                  autofocus: true,
                  autocomplete: "email",
                  class: "form-control" %>
          </div>

          <% if devise_mapping.confirmable? && resource.pending_reconfirmation? %>
            <div class="alert alert-warning small">
              Waiting confirmation for:
              <strong><%= resource.unconfirmed_email %></strong>
            </div>
          <% end %>

          <hr>

          <!-- Password -->
          <div class="mb-3">
            <%= f.label :password, class: "form-label fw-semibold" %>
            <small class="text-muted d-block mb-1">
              Leave blank if you don’t want to change it
            </small>
            <%= f.password_field :password,
                  autocomplete: "new-password",
                  class: "form-control" %>

            <% if @minimum_password_length %>
              <small class="text-muted">
                Minimum <%= @minimum_password_length %> characters
              </small>
            <% end %>
          </div>

          <!-- Password Confirmation -->
          <div class="mb-3">
            <%= f.label :password_confirmation, class: "form-label fw-semibold" %>
            <%= f.password_field :password_confirmation,
                  autocomplete: "new-password",
                  class: "form-control" %>
          </div>

          <!-- Current Password -->
          <div class="mb-4">
            <%= f.label :current_password, class: "form-label fw-semibold" %>
            <small class="text-muted d-block mb-1">
              Required to confirm your changes
            </small>
            <%= f.password_field :current_password,
                  autocomplete: "current-password",
                  class: "form-control" %>
          </div>

          <!-- Submit -->
          <div class="d-grid">
            <%= f.submit "mettre à jour le compte", class: "btn btn-lg", style: "background-color: rgb(118, 150, 86); color: white" %>
          </div>
        <% end %>
      </div>

      <!-- Footer / Danger Zone -->
      <div class="card-footer bg-light p-4">
        <h6 class="text-danger fw-bold mb-3">
          Zone dangereuse
        </h6>

        <div class="d-flex justify-content-between align-items-center flex-wrap gap-2">
          <%= button_to "annuler mon compte",
                registration_path(resource_name),
                method: :delete,
                data: {
                  confirm: "Are you sure you want to cancel your account?",
                  turbo_confirm: "Are you sure you want to cancel your account?"
                },
                class: "btn btn-outline-danger" %>

          <%= link_to "← Back",
                request.referer || root_path,
                class: "btn btn-link text-decoration-none" %>
        </div>
      </div>

    </div>
  </div>
</div>
